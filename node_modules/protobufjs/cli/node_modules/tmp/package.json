ntityHash])
			with (ignore_dup_key = on)
	')
end
else
begin
	exec('
		create unique nonclustered index [NCIX_DefinitionIdentityTable_DefinitionIdentityHash]
			on [System.Activities.DurableInstancing].[DefinitionIdentityTable] ([DefinitionIdentityHash])
			with (ignore_dup_key = on, allow_page_locks = off)
	')
end
go

if (serverproperty('EngineEdition') = 5)
begin
	exec('
		create nonclustered index [NCIX_DefinitionIdentityTable_DefinitionIdentityAnyRevisionHash]
			on [System.Activities.DurableInstancing].[DefinitionIdentityTable] ([DefinitionIdentityAnyRevisionHash])
	')
end
else
begin
	exec('
		create nonclustered index [NCIX_DefinitionIdentityTable_DefinitionIdentityAnyRevisionHash]
			on [System.Activities.DurableInstancing].[DefinitionIdentityTable] ([DefinitionIdentityAnyRevisionHash])
			with (allow_page_locks = off)
	')
end
go

insert into [System.Activities.DurableInstancing].[DefinitionIdentityTable]
(
	[DefinitionIdentityHash],
	[DefinitionIdentityAnyRevisionHash],
	[Name],
	[Package],
	[Build],
	[Major],
	[Minor],
	[Revision]
)
values
(
	'00000000-0000-0000-0000-000000000000',
	'00000000-0000-0000-0000-000000000000',
	null,
	null,
	null,
	null,
	null,
	null
)
go

if exists (select * from sys.objects where object_id = object_id(N'[System.Activities.DurableInstancing].[IdentityOwnerTable]') and type in (N'U'))
	drop table [System.Activities.DurableInstancing].[IdentityOwnerTable]
go

create table [System.Activities.DurableInstancing].[IdentityOwnerTable]
(
	[SurrogateIdentityId] bigint not