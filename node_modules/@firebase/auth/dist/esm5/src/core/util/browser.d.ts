)})}retrieveIndexedDBKeyValuePairs(e,t,r,o){const n=this.getWindowForOrigin(e);if(!n)return Promise.reject(new Error(`Could not find window for origin: ${e}`));const i=[];return new Promise((e,s)=>{const c=n.indexedDB.open(t);c.onsuccess=a.e.createSafeFunction(n,t=>{const c=t.target.result.transaction(r).objectStore(r),l=(o?c.index(o):c).openCursor();l.onsuccess=a.e.createSafeFunction(n,t=>{const r=t.target.result;if(r){const e={keyString:JSON.stringify(r.key),valueString:JSON.stringify(r.value),primaryKeyString:JSON.stringify(r.primaryKey),primaryKey:r.primaryKey};i.push(e);r.continue()}else e(i)});l.onerror=a.e.createSafeFunction(n,()=>{s()})});c.onerror=a.e.createSafeFunction(n,()=>{s()})})}idbRemoveKeyValuePairs(e,t,r,o){const n=this.getWindowForOrigin(t);return n?new Promise((t,i)=>{const s=n.indexedDB.open(r);s.onsuccess=a.e.createSafeFunction(n,r=>{const s=r.target.result.transaction(o,"readwrite").objectStore(o);for(const t of e){s.delete(t).onerror=a.e.createSafeFunction(n,()=>{i()})}t()});s.onerror=a.e.createSafeFunction(n,()=>{i()})}):Promise.reject(new Error(`Could not find window for origin: ${t}`))}localStorageSetItem(e,t,r){return!this.webStorageSetItem(e,t,r,e=>e.localStorage)&&resources.localStorage.quotaLimiting?i.QuotaExceededErrorMessage:""}sessionStorageSetItem(e,t,r){return!this.webStorageSetItem(e,t,r,e=>e.sessionStorage)&&resources.sessionStorage.quotaLimiting?i.QuotaExceededErrorMessage:""}localStorageDeleteItems(e,t){return this.webStorageDeleteItems(e,t,e=>e.localStorage)}sessionStorageDeleteItems(e,t){return this.webStorageDeleteItems(e,t,e=>e.sessionStorage)}localStorageSetSimulateCap(e){try{resources.localStorage.quotaLimiting=e}catch(e){}return!0}sessionStorageSetSimulateCap(e){try{resources.sessionStorage.quotaLimiting=e}catch(e){}return!0}retrieveCookies(e){return i.getAllCookiesByUrl(e).map(e=>{return{name:e.name,value:e.value,domain:e.domain,