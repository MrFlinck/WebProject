oints_Failed", e);
                                        }
                                    });
                                }
                            }, function (e) {
                                
                                _logFailureEvent("UnifiedEnrollment_AddMdm_Discovery_AddValue_Failed", e);
                            });
                        }, function (e) {
                            
                            _logFailureEvent("UnifiedEnrollment_AddMdm_Discovery_FindDiscoveryService_Failed", e);
                        });
                    } else {
                        
                        bridge.invoke("CloudExperienceHost.UnifiedEnroll.doDiscoverEndpoints", result.serverName, upn, isInvalidSslCert).then(function (result) {
                            bridge.invoke("CloudExperienceHost.Telemetry.logEvent", "UnifiedEnrollment_AddMdm_Discovery_DiscoverEndpoints_Succeeded", correlationVector);
                            if (mdmAuthEnum.MDMAuthPolicyOnPremise === result.authPolicy) {
                                
                                _addEnrollmentOnPremParameters(result);
                            } else {
                                
                                _addEnrollmentFederatedParameters(upn, result);
                            }
                        }, function (e) {
                            if (e.number === MENROLL_E_INVALIDSSLCERT) {
                                bridge.invoke("CloudExperienceHost.Storage.SharableData.addValue", "ue_discovery_error", "MENROLL_E_INVALIDSSLCERT").done(function (result) {
                                    bridge.fireEvent(CloudExperienceHost.Events.done, DISCOVERY_ERROR_NAVIGATION);
                                });
                            } else {
                                
                                _logFailureEvent("UnifiedEnrollment_AddMdm_Discovery_DiscoverEndpoints_Failed", e);
                            }
                        });
                    }
                }, function (e) {
                    
                    _logFailureEvent("UnifiedEnrollment_Ad