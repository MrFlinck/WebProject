abase log files path]","%ProgramFiles(x86)%")</condition>
            <condition>MigXmlHelper.DoesStringContentContain("Registry", "HKLM\SYSTEM\CurrentControlSet\Services\NTDS\Parameters [Database log files path]","%SystemDrive%\build")</condition>
            <condition>MigXmlHelper.DoesStringContentContain("Registry", "HKLM\SYSTEM\CurrentControlSet\Services\NTDS\Parameters [Database log files path]","%SystemDrive%\InstalledRepository")</condition>
            <condition>MigXmlHelper.DoesStringContentContain("Registry", "HKLM\SYSTEM\CurrentControlSet\Services\NTDS\Parameters [Database log files path]","%ProfilesFolder%")</condition>
            <condition>MigXmlHelper.DoesStringContentContain("Registry", "HKLM\SYSTEM\CurrentControlSet\Services\NTDS\Parameters [Database log files path]","%ProgramData%")</condition>
            <condition>MigXmlHelper.DoesStringContentContain("Registry", "HKLM\SYSTEM\CurrentControlSet\Services\NTDS\Parameters [Database log files path]","%SystemDrive%\Documents and Settings")</condition>
          </detect>
        </detects>
        <include>
          <objectSet>
            <pattern type="File">%DATABASE_LOG_FILES_PATH%\* [*]</pattern>
          </objectSet>
        </include>
      </rules>

    </role>
  </component>

  <component type="System" context="System">

    <displayName>DiagTrack</displayName>

    <role role="Settings">

      <rules context="System">
        <include>
          <objectSet>
            <pattern type="Registry">HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Diagnostics\DiagTrack [DiagTrackDbVersion]</pattern>
            <pattern type="File">%ProgramData%\Microsoft\Diagnosis [*.rbs]</pattern>
          </objectSet>
        </include>
        <merge script="MigXmlHelper.SourcePriority()">
          <objectSet>
            <pattern type="Registry">HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Diagnostics\DiagTrack [DiagTrackDbVersion]</pattern>
            <pattern type="File">%ProgramData%\Microsoft\Diagnosis [*.rbs]</pattern>
          </objectSet>
        </merge>
      </rules>

    </role>
  </component>

  <component type="System" context="System">

    <displayName>Microsoft-Windows-AppX-Deployment-Server</displayName>

    <role role="Settings">

      <rules context="system">
        <!-- Copy old state repository machine database to downlevel for package policy preservation across os upgrade only if the OS is pre-RS1 RTM (build 14393). Note that IsOSEarlierThan actually behaves as IsOSEarlierThanOrEqualTo, so we use 14392-->
        <conditions>
          <condition>MigXmlHelper.IsOSEarlierThan("NT", "10.0.14392")</condition>
        </conditions>
        <include>
          <objectSet>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository [StateRepository-Machine*]</pattern>
          </objectSet>
        </include>
        <locationModify script="MigXmlHelper.RelativeMove(&apos;%ProgramData%\Microsoft\Windows\AppRepository&apos;,&apos;%ProgramData%\Microsoft\Windows\AppRepository\Downlevel&apos;)">
          <objectSet>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository [StateRepository-Machine*]</pattern>
          </objectSet>
        </locationModify>
      </rules>

      <rules context="system">
      <!-- migrate old state repository machine database for no-register across os upgrade only if the OS is NOT pre-RS1 RTM (build 14393). Note that IsOSEarlierThan actually behaves as IsOSEarlierThanOrEqualTo, so we use 14392-->
        <conditions>
          <condition negation="Yes">MigXmlHelper.IsOSEarlierThan("NT", "10.0.14392")</condition>
        </conditions>
        <include>
          <objectSet>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository [StateRepository-*]</pattern>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository\Packages\*[*]</pattern>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository\Families\*[*]</pattern>
          </objectSet>
        </include>
        <merge script="MigXmlHelper.DestinationPriority()">
          <objectSet>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository\Packages\*[*]</pattern>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository\Families\*[*]</pattern>
          </objectSet>
        </merge>
        <merge script="MigXmlHelper.SourcePriority()">
          <objectSet>
            <pattern type="File">%ProgramData%\Microsoft\Windows\AppRepository [StateRepository-*]</pattern>
          </objectSet>
        </merge>
      </rules>

    </role>
  </component>

  <component type="System" context="System">

    <displayName>Microsoft-OneCore-Bluetooth-Gatt</displayName>

    <role role="Settings">

      <rules context="system">
        <include>
          <objectSet>
            <pattern type="Registry">HKLM\Software\Microsoft\Windows\CurrentVersion\Bluetooth\* [*]</pattern>
          </objectSet>
        </include>
        <excludeAttributes attributes="Security">
          <objectSet>
            <pattern type="Registry">HKLM\Software\Microsoft\Windows\CurrentVersion\Bluetooth\*</pattern>
          </objectSet>
        </excludeAttributes>
      </rules>

    </role>
  </component>

  <component type="System" context="System">

    <displayName>Microsoft-Windows-Graphics-Display-DisplayEnhancementService</displayName>

    <role role="Settings">

      <rules context="system">
        <include>
          <objectSet>
            